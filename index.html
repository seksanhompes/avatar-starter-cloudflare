<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Avatar Creator • Cloudflare</title>

  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.161.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.161.0/examples/jsm/"
    }
  }
  </script>

  <script defer type="module" src="/app.js?v=fix3"></script>
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>

  <style>
    :root { --bg:#0b0b0c; --fg:#eee; --panel:#111317; --btn:#1f2937; --btnb:#374151; }
    * { box-sizing: border-box }
    body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans Thai', sans-serif; background:var(--bg); color:var(--fg); }
    #topbar { display:flex; gap:8px; align-items:center; padding:10px; border-bottom:1px solid #222; background:var(--panel); position:sticky; top:0; z-index:5 }
    #canvas { width:100vw; height:70vh; display:block; background:#0a0b0c }
    .panel { padding:10px; display:flex; gap:12px; align-items:center; flex-wrap:wrap; background:var(--panel) }
    input[type="range"]{ width:180px }
    input[type="color"]{ width:40px; height:32px; border:none; background:transparent; padding:0 }
    input#handle{ background:#0f1216; color:#eaeaea; border:1px solid #23262c; border-radius:10px; padding:8px 10px }
    button{ background:var(--btn); color:#fff; border:1px solid var(--btnb); padding:8px 12px; border-radius:10px; cursor:pointer }
    button[disabled]{ opacity:.5; cursor:not-allowed }
    .spacer{ flex:1 }
    .note{ opacity:.8; font-size:.9rem }
  </style>
</head>
<body>
  <div id="topbar">
    <div class="cf-turnstile" data-sitekey="__TURNSTILE_SITE_KEY__" data-callback="onTurnstile"></div>
    <input id="handle" placeholder="handle (ไม่บังคับ)" />
    <button id="btnLogin">เริ่มใช้งาน</button>
    <span class="spacer"></span>
    <button id="btnSave" disabled>บันทึก</button>
    <button id="btnUpload" disabled>อัปโหลด VRM</button>
  </div>

  <canvas id="canvas"></canvas>

  <div class="panel">
    <span class="note">ถ้าไม่เห็นโมเดล ให้ใส่ไฟล์ที่ <code>/models/base.vrm</code> หรือกด "อัปโหลด VRM"</span>
  </div>
</body>
</html>
